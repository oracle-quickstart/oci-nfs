{% for item in groups['bastion'] %}

	{% set short_name = hostvars[item]['ansible_fqdn'].split('.') %}
	{% set key = hostvars[item]['ansible_ssh_host_key_ecdsa_public'] %}
	{{ hostvars[item]['ansible_host'] }} ecdsa-sha2-nistp256 {{ key }} 
	{{ short_name[0] }} ecdsa-sha2-nistp256 {{ key }}
	bastion ecdsa-sha2-nistp256 {{ key }}
	{{ hostvars[item]['ansible_fqdn']}} ecdsa-sha2-nistp256 {{ key }}
    {{ hostvars[item]['ansible_hostname'] }} ecdsa-sha2-nistp256 {{ key }}

{% endfor %}

{% for item in groups['storage'] %}

	{% set short_name = hostvars[item]['ansible_fqdn'].split('.') %}
	{% set key = hostvars[item]['ansible_ssh_host_key_ecdsa_public'] %}
	{% set number = loop.index %}
	{{ hostvars[item]['ansible_host'] }} ecdsa-sha2-nistp256 {{ key }} 
	{{ short_name[0] }} ecdsa-sha2-nistp256 {{ key }}

	storage-node-{{ number }} ecdsa-sha2-nistp256 {{ key }}
	storage-node-{{ number }}-rdma ecdsa-sha2-nistp256 {{ key }}
	storage-node-{{ number }}.local.vcn ecdsa-sha2-nistp256 {{ key }}
	{{ hostvars[item]['ansible_fqdn'] }} ecdsa-sha2-nistp256 {{ key }}
	nfs-storage-node-{{ number }}.local.vcn ecdsa-sha2-nistp256 {{ key }}
	nfs-storage-node-{{ number }} ecdsa-sha2-nistp256 {{ key }}
    {{ hostvars[item]['ansible_hostname'] }} ecdsa-sha2-nistp256 {{ key }}

{% endfor %}


{% for item in groups['compute'] %}

	{% set short_name = hostvars[item]['ansible_fqdn'].split('.') %}
	{% set key = hostvars[item]['ansible_ssh_host_key_ecdsa_public'] %}
	{% set number = loop.index %}
	{{ hostvars[item]['ansible_host'] }} ecdsa-sha2-nistp256 {{ key }}
	{{ short_name[0] }} ecdsa-sha2-nistp256 {{ key }}

	compute-node-{{ number }} ecdsa-sha2-nistp256 {{ key }}
	compute-node-{{ number }}-rdma ecdsa-sha2-nistp256 {{ key }}
	compute-node-{{ number }}.local.vcn ecdsa-sha2-nistp256 {{ key }}
	{{ hostvars[item]['ansible_fqdn'] }} ecdsa-sha2-nistp256 {{ key }}
	nfs-compute-node-{{ number }}.local.vcn ecdsa-sha2-nistp256 {{ key }}
	nfs-compute-node-{{ number }} ecdsa-sha2-nistp256 {{ key }}
    {{ hostvars[item]['ansible_hostname'] }} ecdsa-sha2-nistp256 {{ key }}

{% endfor %}

{% for item in groups['quorum'] %}

	{% set short_name = hostvars[item]['ansible_fqdn'].split('.') %}
	{% set key = hostvars[item]['ansible_ssh_host_key_ecdsa_public'] %}
	{% set number = loop.index %}
	{{ hostvars[item]['ansible_host'] }} ecdsa-sha2-nistp256 {{ key }}
	{{ short_name[0] }} ecdsa-sha2-nistp256 {{ key }}

	quorum-node-{{ number }} ecdsa-sha2-nistp256 {{ key }}
	quorum-node-{{ number }}-rdma ecdsa-sha2-nistp256 {{ key }}
	quorum-node-{{ number }}.local.vcn ecdsa-sha2-nistp256 {{ key }}
	{{ hostvars[item]['ansible_fqdn'] }} ecdsa-sha2-nistp256 {{ key }}
    {{ hostvars[item]['ansible_hostname'] }} ecdsa-sha2-nistp256 {{ key }}

{% endfor %}

{% for item in groups['monitor'] %}

    {% set short_name = hostvars[item]['ansible_fqdn'].split('.') %}
    {% set key = hostvars[item]['ansible_ssh_host_key_ecdsa_public'] %}
    {% set number = loop.index %}
    {{ hostvars[item]['ansible_host'] }} ecdsa-sha2-nistp256 {{ key }}
    {{ short_name[0] }} ecdsa-sha2-nistp256 {{ key }}

    grafana-node-{{ number }} ecdsa-sha2-nistp256 {{ key }}
    grafana-node-{{ number }}-rdma ecdsa-sha2-nistp256 {{ key }}
    grafana-node-{{ number }}.local.vcn ecdsa-sha2-nistp256 {{ key }}
    {{ hostvars[item]['ansible_fqdn'] }} ecdsa-sha2-nistp256 {{ key }}
    {{ hostvars[item]['ansible_hostname'] }} ecdsa-sha2-nistp256 {{ key }}

{% endfor %}
